import{d as F,a9 as C,g as p,$ as M,e as b,a7 as B,a0 as q,h as E,a as I,r as O,o as P}from"./app-DQnrdmoF.js";const L=F({__name:"ClickSpark",props:{sparkColor:{default:"#fff"},sparkSize:{default:10},sparkRadius:{default:15},sparkCount:{default:8},duration:{default:400},easing:{default:"ease-out"},extraScale:{default:1}},setup(w){const n=w,x=C("containerRef"),o=C("canvasRef"),d=p([]),g=p(null),r=p(null),k=M(()=>e=>{switch(n.easing){case"linear":return e;case"ease-in":return e*e;case"ease-in-out":return e<.5?2*e*e:-1+(4-2*e)*e;default:return e*(2-e)}}),S=e=>{const t=o.value;if(!t)return;const a=t.getBoundingClientRect(),s=e.clientX-a.left,l=e.clientY-a.top,h=performance.now(),u=Array.from({length:n.sparkCount},(i,f)=>({x:s,y:l,angle:2*Math.PI*f/n.sparkCount,startTime:h}));d.value.push(...u)},v=e=>{g.value||(g.value=e);const t=o.value,a=t?.getContext("2d");!a||!t||(a.clearRect(0,0,t.width,t.height),d.value=d.value.filter(s=>{const l=e-s.startTime;if(l>=n.duration)return!1;const h=l/n.duration,u=k.value(h),i=u*n.sparkRadius*n.extraScale,f=n.sparkSize*(1-u),y=s.x+i*Math.cos(s.angle),z=s.y+i*Math.sin(s.angle),_=s.x+(i+f)*Math.cos(s.angle),A=s.y+(i+f)*Math.sin(s.angle);return a.strokeStyle=n.sparkColor,a.lineWidth=2,a.beginPath(),a.moveTo(y,z),a.lineTo(_,A),a.stroke(),!0}),r.value=requestAnimationFrame(v))},R=()=>{const e=o.value;if(!e)return;const t=e.parentElement;if(!t)return;const{width:a,height:s}=t.getBoundingClientRect();(e.width!==a||e.height!==s)&&(e.width=a,e.height=s)};let m;const T=()=>{clearTimeout(m),m=setTimeout(R,100)};let c=null;return b(()=>{const e=o.value;if(!e)return;const t=e.parentElement;t&&(c=new ResizeObserver(T),c.observe(t),R(),r.value=requestAnimationFrame(v))}),B(()=>{c&&c.disconnect(),clearTimeout(m),r.value&&cancelAnimationFrame(r.value)}),q([()=>n.sparkColor,()=>n.sparkSize,()=>n.sparkRadius,()=>n.sparkCount,()=>n.duration,k,()=>n.extraScale],()=>{r.value&&cancelAnimationFrame(r.value),r.value=requestAnimationFrame(v)}),(e,t)=>(P(),E("div",{ref_key:"containerRef",ref:x,class:"relative h-full w-full",onClick:S},[I("canvas",{ref_key:"canvasRef",ref:o,class:"pointer-events-none absolute inset-0 z-[9999]"},null,512),O(e.$slots,"default")],512))}});export{L as _};
